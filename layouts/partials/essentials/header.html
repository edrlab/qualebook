<header>
  <div class="header-hero">
    <!-- logo -->
    <div>
      <a href="{{ site.BaseURL | relLangURL }}">
        {{ partial "logo" }}
        <h1>Qualebook</h1>
      </a>
    </div>

    <div class="header-actions">
      {{ with site.Params.search }}
        {{ if .enable }}
          <button aria-label="search" data-target="search-modal">
            <i class="fa-solid fa-search"></i>
          </button>
        {{ end }}
      {{ end }}

      {{ partial "components/language-switcher" (dict "Context" . "Class" "") }}
      <!-- {{ partial "components/theme-switcher" (dict "Class" "") }} -->

      {{ if site.Params.navigation_button.enable }}
        <a href="{{ site.Params.navigation_button.link | relLangURL }}">
          {{ site.Params.navigation_button.label }}
        </a>
      {{ end }}
    </div>
  </div>

<!-- Navbar toggler -->
<div class="burger-menu">
  <!-- Titre de la page -->
  <div class="current-page-title">
    {{ $currentPage := . }}
    {{ range site.Menus.main }}
      {{ $menuURL := .URL | absLangURL }}
      {{ $pageURL := $currentPage.Permalink | absLangURL }}
      {{ if eq $menuURL $pageURL }}
        {{ .Name }}
      {{ end }}
    {{ end }}
  </div>

  <!-- Toggle button -->
  <input id="nav-toggle" type="checkbox" />
  <label for="nav-toggle" class="burger-toggle">
    <svg id="show-button" viewBox="0 0 20 20">
      <title>Menu Open</title>
      <path d="M0 3h20v2H0V3z m0 6h20v2H0V9z m0 6h20v2H0V0z"></path>
    </svg>
    <svg id="hide-button" viewBox="0 0 20 20">
      <title>Menu Close</title>
      <polygon points="11 9 22 9 22 11 11 11 11 22 9 22 9 11 -2 11 -2 9 9 9 9 -2 11 -2" transform="rotate(45 10 10)"></polygon>
    </svg>
  </label>

  <!-- Le menu Ã  afficher/masquer -->
  <nav class="nav-dropdown">
    <ul id="nav-menu-dropdown">
      {{ range site.Menus.main }}
      {{ if in (slice "about" "rules" "glossary") .Identifier }}
        {{ $menuURL := .URL | absLangURL }}
        {{ $pageURL:= $currentPage.Permalink | absLangURL }}
        {{ $active := eq $menuURL $pageURL }}
        {{ if .HasChildren }}
          <li>
            <span>
              {{ .Name }}
              <svg viewBox="0 0 20 20">
                <path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" />
              </svg>
            </span>
            <ul>
              {{ range .Children }}
                {{ $childURL := .URL | absLangURL }}
                {{ $active := eq $childURL $pageURL }}
                <li>
                  <a
                    {{ if findRE `^http` .URL }}
                      target="_blank" rel="noopener"
                    {{ end }}
                    href="{{- if findRE `^#` .URL -}}
                      {{- if not $.IsHome -}}
                        {{- site.BaseURL | relLangURL -}}
                      {{- end }}
                      {{- .URL -}}
                    {{- else -}}
                      {{- .URL | relLangURL -}}
                    {{- end -}}">
                    {{ .Name }}
                  </a>
                </li>
              {{ end }}
            </ul>
          </li>
        {{ else }}
          <li class="nav-item">
            <a
              {{ if findRE `^http` .URL }}
                target="_blank" rel="noopener"
              {{ end }}
              href="{{- if findRE `^#` .URL -}}
                {{- if not $.IsHome -}}
                  {{- site.BaseURL | relLangURL -}}
                {{- end }}{{- .URL -}}
              {{- else -}}
                {{- .URL | relLangURL -}}
              {{- end -}}">
              {{ .Name }}
            </a>
          </li>
        {{ end }}
      {{ end }}
      {{ end }}
    </ul>
  </nav>
</div>
  <!-- main navbar -->
  <nav class="header-nav">
    <ul id="nav-menu">
      {{ $currentPage := . }}
      {{ range site.Menus.main }}
      {{ if in (slice "about" "rules" "glossary") .Identifier }}
        {{ $menuURL := .URL | absLangURL }}
        {{ $pageURL:= $currentPage.Permalink | absLangURL }}
        {{ $active := eq $menuURL $pageURL }}
        {{ if .HasChildren }}
          <li>
            <span>
              {{ .Name }}
              <svg viewBox="0 0 20 20">
                <path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" />
              </svg>
            </span>
            <ul>
              {{ range .Children }}
                {{ $childURL := .URL | absLangURL }}
                {{ $active := eq $childURL $pageURL }}
                <li>
                  <a
                    {{ if findRE `^http` .URL }}
                      target="_blank" rel="noopener"
                    {{ end }}
                    href="{{- if findRE `^#` .URL -}}
                      {{- if not $.IsHome -}}
                        {{- site.BaseURL | relLangURL -}}
                      {{- end }}
                      {{- .URL -}}
                    {{- else -}}
                      {{- .URL | relLangURL -}}
                    {{- end -}}">
                    {{ .Name }}
                  </a>
                </li>
              {{ end }}
            </ul>
          </li>
        {{ else }}
          <li class="nav-item">
            <a
              {{ if findRE `^http` .URL }}
                target="_blank" rel="noopener"
              {{ end }}
              href="{{- if findRE `^#` .URL -}}
                {{- if not $.IsHome -}}
                  {{- site.BaseURL | relLangURL -}}
                {{- end }}{{- .URL -}}
              {{- else -}}
                {{- .URL | relLangURL -}}
              {{- end -}}">
              {{ .Name }}
            </a>
          </li>
        {{ end }}
      {{ end }}
      {{ end }}
      {{ if site.Params.navigation_button.enable }}
        <li>
          <a href="{{ site.Params.navigation_button.link | relLangURL }}">
            {{ site.Params.navigation_button.label }}
          </a>
        </li>
      {{ end }}
    </ul>
  </nav>
</header>
